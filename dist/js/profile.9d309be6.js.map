{"version":3,"file":"js/profile.9d309be6.js","mappings":"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","sources":["webpack://noosmilk/./src/views/UserProfile.vue","webpack://noosmilk/./src/views/UserProfile.vue?5f8e"],"sourcesContent":["<template>\n  <b-container class=\"user-profile text-light\">\n\n    <b-card-group columns>\n      <b-card\n      bg-variant=\"info\" text-variant=\"white\" header=\"Profile\"\n      class=\"text-center mb-2\"\n      tag=\"article\"\n      style=\"max-width: 20rem;\"\n      >\n      <b-card-title>\n        username<b-input v-model=\"user.name\" placeholder=\"username\" />\n      </b-card-title>\n      <b-card-text>\n        prefered color\n        <b-input v-model=\"user.color\" type=\"color\" />\n        <!-- Some quick example text to build on the card title and make up the bulk of the card's content. -->\n      </b-card-text>\n\n      <b-button @click=\"save\" variant=\"primary\">Save</b-button>\n    </b-card>\n\n    <b-card\n    bg-variant=\"info\" text-variant=\"white\" header=\"Identity Manager\"\n    class=\"text-center mb-2\"\n    tag=\"article\"\n    style=\"max-width: 20rem;\"\n    >\n    <!-- <b-card-title>\n    username<b-input v-model=\"user.name\" placeholder=\"username\" />\n  </b-card-title> -->\n  <b-card-text>\n\n    <!-- <div class=\"mt-3\">Selected file: {{ identityFile ? identityFile.name : '' }}</div> -->\n    <!-- <b-button variant=\"outline-primary\" size=\"sm\" @click=\"import\">import identity</b-button> -->\n    <b-button variant=\"success text-dark\" @click=\"download\"><b-icon v-b-modal.modal-share font-scale=\"1.5\" icon=\"download\" aria-hidden=\"true\"></b-icon>download this identity</b-button>\n\n    <!-- prefered color\n    <b-input v-model=\"user.color\" type=\"color\" /> -->\n    <!-- Some quick example text to build on the card title and make up the bulk of the card's content. -->\n  </b-card-text>\n\n  <template #footer>\n\n\n\n\n    <b-alert show variant=\"warning\">\n      <h4 class=\"alert-heading\">CAN NOT BE UNDONE !</h4>\n      <p>\n        You will loose your history !\n      </p>\n      <hr>\n      <p class=\"mb-0\">\n        Be sur to download the actual identity before !\n      </p>\n    </b-alert>\n    <!-- <b-alert class=\"text-danger\" show>CAN NOT BE UNDONE ! <br>Be sur to downlaod the actual identity before !</b-alert> -->\n    <b-form-file\n    v-model=\"identityFile\"\n    :state=\"Boolean(identityFile)\"\n    placeholder=\"Choose a identity file or drop it here...\"\n    drop-placeholder=\"Drop identity file here...\"\n    ></b-form-file>\n    <b-button size=\"sm\" @click=\"randomUser\" variant=\"outline-warning text-dark\"><b-icon v-b-modal.modal-share font-scale=\"1.5\" icon=\"dice3\" aria-hidden=\"true\"></b-icon>random user</b-button>\n    <b-button variant=\"danger text-dark\" @click=\"removeUser\" size=\"sm\"><b-icon v-b-modal.modal-share font-scale=\"1.5\" icon=\"trash\" aria-hidden=\"true\"></b-icon>remove from this device</b-button>\n  </template>\n\n  <!-- <b-button @click=\"save\" variant=\"primary\">Save</b-button> -->\n</b-card>\n\n</b-card-group>\n\n<br>\n<!-- <b-button @click=\"randomUser\" variant=\"outline-info\" size=\"sm\">random user</b-button> -->\n\n<br>\n{{ user }}\n</b-container>\n</template>\n\n<script>\nexport default {\n  name: 'UserProfile',\n  data(){\n    return{\n      identityFile: null\n    }\n  },\n  methods:{\n    async randomUser(){\n      let user = await this.$randomUser()\n      console.log(user)\n      this.$store.commit('actor/setUser', user)\n      // this.$userChanged()\n      // this.userChanged()\n    },\n    save(){\n      this.$store.commit('actor/setUser', this.user)\n      this.$userChanged()\n      this.$router.push('/')\n    },\n    removeUser(){\n      this.$removeUser()\n      this.randomUser()\n    },\n    async upload (file, cb){\n      const fileReader = new FileReader()\n\n      await fileReader.addEventListener('load', () => {\n        cb(fileReader.result)\n      })\n      fileReader.readAsText(file, \"UTF-8\")\n      // console.log(result)\n      // return result\n    },\n    populateIdentity(data){\n      console.log('populate', data)\n      let user = JSON.parse(data)\n      this.$store.commit('actor/setUser', user)\n      this.$userChanged()\n    },\n    download(){\n      console.log(this.user)\n      var contenu = JSON.stringify(this.user, null, 2) //`{\"test\": \"json\" }` //this.content\n      //console.log(\"todo: poser la question compresser\",contenu)\n      //  var format = \"json\" //this.format;\n      //  console.log(contenu, format)\n      let suggested = this.user.name //\"Brain_\"+Date.now()\n      var filename = prompt(\"Choose a name for the exported file :\", suggested);\n      if (filename == null || filename == \"\") {\n        return;\n      }\n\n      let contentType = 'application/json';\n      let fileNameToSaveAs = filename + \".json\";\n\n      var textFileAsBlob = new Blob([contenu], { type: contentType }\n      );\n      var downloadLink = document.createElement(\"a\");\n      downloadLink.download = fileNameToSaveAs;\n      downloadLink.innerHTML = \"Download File\";\n      if(navigator.userAgent.indexOf(\"Chrome\") != -1) {\n        downloadLink.href = window.URL.createObjectURL(textFileAsBlob);\n      } else {\n        downloadLink.href = window.URL.createObjectURL(textFileAsBlob);\n        downloadLink.target=\"_blank\";\n        downloadLink.style.display = \"none\";\n        document.body.appendChild(downloadLink);\n      }\n      var event = document.createEvent(\"MouseEvents\");\n      event.initMouseEvent(\n        \"click\", true, false, window, 0, 0, 0, 0, 0\n        , false, false, false, false, 0, null\n      );\n      downloadLink.dispatchEvent(event);\n      setTimeout(function(){\n        document.body.removeChild(downloadLink);\n        window.URL.revokeObjectURL(downloadLink);\n      }, 1000);\n    }\n  },\n  watch:{\n    identityFile(){\n      console.log(this.identityFile)\n      this.upload(this.identityFile, this.populateIdentity)\n    }\n  },\n  computed:{\n    user(){\n      return this.$store.state.actor.user\n    },\n  }\n\n\n}\n</script>\n\n<style lang=\"css\" scoped>\n.user-profile {\n\n}\n</style>\n","import { render } from \"./UserProfile.vue?vue&type=template&id=28ca1da5&scoped=true\"\nimport script from \"./UserProfile.vue?vue&type=script&lang=js\"\nexport * from \"./UserProfile.vue?vue&type=script&lang=js\"\n\nimport \"./UserProfile.vue?vue&type=style&index=0&id=28ca1da5&lang=css&scoped=true\"\n\nimport exportComponent from \"/home/smag/dev/noosmilk/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-28ca1da5\"]])\n\nexport default __exports__"],"names":["_createElementVNode","class","_createBlock","_component_b_container","_createVNode","_component_b_card_group","columns","_component_b_card","header","tag","style","_component_b_card_title","_component_b_input","$options","name","$event","placeholder","_component_b_card_text","color","type","_component_b_button","onClick","variant","footer","_component_b_alert","show","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_component_b_form_file","$data","state","Boolean","size","_component_b_icon","icon","_hoisted_11","_hoisted_12","_toDisplayString","data","identityFile","methods","async","user","this","$randomUser","console","log","$store","commit","save","$userChanged","$router","push","removeUser","$removeUser","randomUser","file","cb","fileReader","FileReader","addEventListener","result","readAsText","populateIdentity","JSON","parse","download","contenu","stringify","suggested","filename","prompt","contentType","fileNameToSaveAs","textFileAsBlob","Blob","downloadLink","document","createElement","innerHTML","navigator","userAgent","indexOf","href","window","URL","createObjectURL","target","display","body","appendChild","event","createEvent","initMouseEvent","dispatchEvent","setTimeout","removeChild","revokeObjectURL","watch","upload","computed","actor","__exports__","render"],"sourceRoot":""}